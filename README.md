# セキュアRAGナレッジベース

社内のドキュメント（Excel、PDF、Word等）を安全に検索・質問できるRAG（Retrieval Augmented Generation）システム。APIキーベースで外部LLM（OpenAI、Claude、Gemini）またはローカルLLMを利用可能。

## 概要

このシステムは、リプレイス案件や社内プロジェクトで使用される仕様書や技術資料を効率的に検索・参照するための知識ベースを提供します。ドキュメントをアップロードするだけで、自然言語による質問応答が可能になります。

## セキュリティ対策

- **データ暗号化**: すべてのドキュメントと埋め込みデータは保存時に暗号化
- **機密情報マスキング**: メールアドレス、電話番号などの個人情報を自動検出・マスキング
- **機密レベル制御**: ドキュメントの機密レベルに応じたLLMへの情報送信制限
- **認証・認可**: ユーザー認証と権限管理による適切なアクセス制御
- **操作ログ記録**: すべての操作とドキュメントアクセスを記録
- **ローカル処理**: すべてのデータをローカル環境で処理可能

## 主な機能

- **多様なドキュメント対応**: Excel、PDF、Word、テキスト等の形式をサポート
- **自然言語質問応答**: ドキュメントの内容に基づいた質問に回答
- **マルチLLM対応**: OpenAI、Claude、Gemini等の外部LLM、またはローカルLLMを選択可能
- **ドキュメント管理**: アップロード、メタデータ設定、検索機能
- **履歴管理**: 質問・回答履歴の保存と参照
- **Docker対応**: 簡単にデプロイ可能なコンテナ構成

## セットアップ方法

### 必要条件

- Docker と Docker Compose
- Git
- （オプション）各種LLM用のAPIキー

### 基本セットアップ

1. リポジトリをクローン
   ```
   git clone https://github.com/your-org/secure-rag-knowledge-base.git
   cd secure-rag-knowledge-base
   ```

2. セットアップスクリプトを実行
   ```
   chmod +x scripts/*.sh
   ./scripts/setup.sh
   ```

3. 開発環境を起動
   ```
   ./scripts/dev.sh
   ```

4. ブラウザでアクセス
   ```
   http://localhost:8501
   ```

### APIキーの設定

1. UIの「設定」画面からLLMプロバイダーを選択
2. APIキーを入力
3. 使用するモデルを選択
4. 「設定を保存」をクリック

### ドキュメントの追加

1. UIの「ドキュメント」画面から「アップロード」をクリック
2. ファイルを選択またはドラッグ＆ドロップ
3. 機密レベルやメタデータを設定
4. 「処理開始」をクリック

## 使用方法

1. 「チャット」画面で質問を入力
2. システムが関連ドキュメントを検索
3. 回答と参照元情報が表示される

## ディレクトリ構成

```
secure-rag-knowledge-base/
├── api/                  # バックエンドAPI (FastAPI)
├── rag_engine/           # RAGエンジン
├── parsers/              # ドキュメントパーサー
├── ui/                   # フロントエンド (Streamlit)
├── data/                 # データディレクトリ
├── scripts/              # スクリプト類
└── docker-compose.yml    # Docker構成
```